Metadata-Version: 2.4
Name: mariadb-pool
Version: 2.0.0.dev8
Summary: Advanced connection pooling for MariaDB Connector/Python
Author: Georg Richter
License-Expression: LGPL-2.1-or-later
Project-URL: Homepage, https://www.github.com/mariadb-corporation/mariadb-connector-python
Project-URL: Documentation, https://mariadb-corporation.github.io/mariadb-connector-python/
Project-URL: Repository, https://www.github.com/mariadb-corporation/mariadb-connector-python
Project-URL: Bug Tracker, https://jira.mariadb.org/
Project-URL: Source Code, https://www.github.com/mariadb-corporation/mariadb-connector-python
Keywords: MariaDB,MySQL,database,connector,pool,pooling
Classifier: Development Status :: 4 - Beta
Classifier: Environment :: Console
Classifier: Programming Language :: Python
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Programming Language :: Python :: 3.13
Classifier: Programming Language :: Python :: 3.14
Classifier: Operating System :: OS Independent
Classifier: Intended Audience :: Developers
Classifier: Topic :: Database
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Requires-Python: >=3.8
Description-Content-Type: text/markdown

# MariaDB Connection Pool

Connection pooling for MariaDB Connector/Python with automatic connection management, health checking, and monitoring.

## Installation

Install MariaDB Connector/Python with pool support:

```bash
pip install mariadb[pool]
```

Or install the pool package separately:

```bash
pip install mariadb-pool
```

## Features

- **Easy Connection Management**: Automatic connection pooling via `mariadb.ConnectionPool`
- **URI Support**: Create pools with connection URIs for clean configuration
- **Dynamic Pool Sizing**: Automatically adjusts between min and max connections
- **Connection Health Checking**: Periodic validation of idle connections
- **Thread-Safe**: Fully thread-safe for multi-threaded applications
- **Pool Statistics**: Monitor pool usage and performance
- **Context Manager Support**: Clean connection handling with `with` statements

## Quick Start

### Synchronous Connection Pool

#### Using Connection URI

The simplest way to create a connection pool:

```python
import mariadb

# Create pool with URI
pool = mariadb.ConnectionPool(
    "mariadb://user:password@localhost:3306/mydb?pool_name=mypool&max_size=10"
)

# Use context manager to ensure connection is returned to pool
with pool.connection() as conn:
    with conn.cursor() as cursor:
        cursor.execute("SELECT * FROM users")
        results = cursor.fetchall()

# Close pool when done
pool.close()
```

#### Using Connection Parameters

Create a pool with traditional connection parameters:

```python
import mariadb

# Create pool with connection parameters
pool = mariadb.ConnectionPool(
    pool_name="mypool",
    host="localhost",
    port=3306,
    user="root",
    password="password",
    database="mydb",
    max_size=10,
    pool_reset_connection=True
)

# Use context manager to ensure connection is returned to pool
with pool.connection() as conn:
    with conn.cursor() as cursor:
        cursor.execute("SELECT * FROM users")
        results = cursor.fetchall()

pool.close()
```

### Asynchronous Connection Pool

#### Using Connection URI

Create an async pool with URI:

```python
import mariadb
import asyncio

async def main():
    # Create async pool with URI
    pool = mariadb.AsyncConnectionPool(
        "mariadb://user:password@localhost:3306/mydb?pool_name=async_pool&max_size=10"
    )
    
    # Must call open() to establish connections
    await pool.open()
    
    # Get connection from pool
    with await pool.get_connection() as conn:
        async with conn.cursor() as cursor:
            await cursor.execute("SELECT * FROM users")
            results = await cursor.fetchall()
    
    # Close pool when done
    await pool.close()

asyncio.run(main())
```

#### Using Connection Parameters

Create an async pool with traditional parameters:

```python
import mariadb
import asyncio

async def main():
    # Create async pool with connection parameters
    pool = mariadb.AsyncConnectionPool(
        pool_name="async_pool",
        host="localhost",
        port=3306,
        user="root",
        password="password",
        database="mydb",
        max_size=10,
        pool_reset_connection=True
    )
    
    # Must call open() to establish connections
    await pool.open()
    
    with await pool.get_connection() as conn:
        async with conn.cursor() as cursor:
            await cursor.execute("SELECT * FROM users")
            results = await cursor.fetchall()
    
    await pool.close()

asyncio.run(main())
```

## Pool Configuration Options

The pool accepts the following configuration parameters:

### Pool-Specific Parameters

| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| `min_size` | int | 10 | Minimum number of connections to maintain |
| `max_size` | int | 10 | Maximum number of connections allowed (max: 64) |
| `max_idle_time` | float | 600.0 | Maximum idle time (seconds) before closing connection |
| `max_lifetime` | float | 3600.0 | Maximum lifetime (seconds) of a connection |
| `validation_interval` | float | 30.0 | Interval (seconds) between connection validations |
| `acquire_timeout` | float | 30.0 | Timeout (seconds) when acquiring a connection |
| `enable_health_check` | bool | True | Enable periodic health checks on idle connections |
| `reset_connection` | bool | False | Reset connection state when returned to pool |

**Note:** If you set only `min_size` or only `max_size` (without setting the other), both will be set to the same value to create a fixed-size pool.

### mariadb.ConnectionPool Parameters

Additional parameters supported by `mariadb.ConnectionPool`:

| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| `pool_name` | str | Required | Unique name for the pool |
| `pool_reset_connection` | bool | True | Alias for reset_connection (mapped by wrapper) |
| `pool_validation_interval` | float | - | Alias for validation_interval (mapped by wrapper) |

